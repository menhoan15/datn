#!/bin/bash

CONTAINER_NAME=mongo

IMSI_LIST="001011234567895 001011234567896 001011234567897 001011234567898 001011234567899 001011234567900 001011234567901 001011234567902 001011234567903 001011234567904 001011234567905 001011234567906 001011234567907 001011234567908 001011234567909 001011234567910 001011234567911 001011234567912 001011234567913 001011234567914 001011234567915 001011234567916 001011234567917 001011234567918 001011234567919 001011234567920 001011234567921 001011234567922 001011234567923 001011234567924 001011234567925 001011234567926 001011234567927 001011234567928 001011234567929 001011234567930 001011234567931 001011234567932 001011234567933 001011234567934 001011234567935 001011234567936 001011234567937 001011234567938 001011234567939 001011234567940 001011234567941 001011234567942 001011234567943 001011234567944 101011234567895 101011234567896 101011234567897 101011234567898 101011234567899 101011234567900 101011234567901 101011234567902 101011234567903 101011234567904 101011234567905 101011234567906 101011234567907 101011234567908 101011234567909 101011234567910 101011234567911 101011234567912 101011234567913 101011234567914 101011234567915 101011234567916 101011234567917 101011234567918 101011234567919 101011234567920 101011234567921 101011234567922 101011234567923 101011234567924 101011234567925 101011234567926 101011234567927 101011234567928 101011234567929 101011234567930 101011234567931 101011234567932 101011234567933 101011234567934 101011234567935 101011234567936 101011234567937 101011234567938 101011234567939 101011234567940 101011234567941 101011234567942 101011234567943 101011234567944"
KI=8baf473f2f8fd09487cccbd7097c6862
OPC=11111111111111111111111111111111

for IMSI in $IMSI_LIST; do  
   docker exec $CONTAINER_NAME mongo --eval "db.subscribers.update({\"imsi\" : \"$IMSI\"}, { \$setOnInsert: {\"imsi\" : \"$IMSI\",\"subscribed_rau_tau_timer\": NumberInt(12),\"network_access_mode\": NumberInt(2),\"subscriber_status\": NumberInt(0),\"access_restriction_data\": NumberInt(32),\"slice\":[{\"sst\": NumberInt(1),\"default_indicator\":true,\"session\":[{\"name\":\"internet\",\"type\":NumberInt(3),\"pcc_rule\":[],\"ambr\":{\"uplink\":{\"value\":NumberInt(1),\"unit\":NumberInt(3)},\"downlink\":{\"value\":NumberInt(1),\"unit\":NumberInt(3)}},\"qos\":{\"index\":NumberInt(9),\"arp\":{\"priority_level\":NumberInt(8),\"pre_emption_capability\":NumberInt(1),\"pre_emption_vulnerability\":NumberInt(1)}}}]}],\"ambr\":{\"uplink\":{\"value\":NumberInt(1),\"unit\":NumberInt(3)},\"downlink\":{\"value\":NumberInt(1),\"unit\":NumberInt(3)}},\"security\":{\"k\":\"$KI\",\"amf\":\"8000\",\"op\":null,\"opc\":\"$OPC\"}}}, upsert=true);" open5gs
done


